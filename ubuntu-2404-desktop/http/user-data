#cloud-config
autoinstall:
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#top-level-keys
  # version is an Autoinstall required field.
  version: 1

  # User creation can occur in one of 3 ways:
  # 1. Create a user using this `identity` section.
  # 2. Create users as documented in cloud-init inside the user-data section,
  #    which means this single-user identity section may be removed.
  # 3. Prompt for user configuration on first boot.  Remove this identity
  #    section and see the "Installation without a default user" section.
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#ai-identity
  #identity:

  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#ssh
  # recommended configuration when openssh-server is desired
  ssh:
    install-server: true
    authorized-keys:
      # replace with the contents of the public key(s) as generated by ssh-keygen or similar tools
      - ssh-ed25519 AAAAC3NzaC..6O8tvZobj user@host
    # Change this to true if you require password auth instead of authorized keys
    allow-pw: true

  # If you don't supply a user-data: section, you need to fill out the identity
  # section above.
  # This is where the majority of your automation settings will exist, list disk.
  # Complete user-data reference: https://docs.cloud-init.io/en/latest/reference/examples.html
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#user-data
  user-data:
     users:
       - name: user1
         gecos: 'user1'
         passwd: '$6$IEXNBzIlhRd2lR2e$ygPi2XMmQtKDKm3Z40xKUtEc00HIL9rUzJx7Hx9Xe.wqpiSIvHPC3RGEgvy7jfrydTNdlVsoHmUCShzQQtl5B0'
         groups: adm, cdrom, dip, lxd, plugdev, sudo
         sudo: ALL=(ALL) NOPASSWD:ALL
         shell: /bin/bash
         lock_passwd: False