#cloud-config
autoinstall:
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#top-level-keys
  # version is an Autoinstall required field.
  version: 1

  # User creation can occur in one of 3 ways:
  # 1. Create a user using this `identity` section.
  # 2. Create users as documented in cloud-init inside the user-data section,
  #    which means this single-user identity section may be removed.
  # 3. Prompt for user configuration on first boot.  Remove this identity
  #    section and see the "Installation without a default user" section.
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#ai-identity
  #identity:

  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#ssh
  # recommended configuration when openssh-server is desired
  ssh:
    install-server: true
    authorized-keys:
      # replace with the contents of the public key(s) as generated by ssh-keygen or similar tools
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDQoacgIXs4LQCmc46e7SbbgimNVBPqM8KkDV5NrGpzp8aqYkl21XH+6rKhYhQTX2EzCsJ4UjnsQdvl/lIXk3KXfl6HNrRyyZKQt1omGlsu5QUiFbVtOBC4fx/C8UKBgNli1Ao5qg/+VpfQkJTfKctqwrpG/a42ervwM5tXsrf9KSI5XB/+bWqDIza4ABssTmvgoOW7a9cvXtoFZimh947U6HV+5LLBeUF9A6cU99c16vp/VGrJXCcHoKMRzhk+gXNbr7e9mYvipWU55q+6fv/8SEN3++hm/RKSZCgD38t4ES7DyyJurUSr13eNt8TSdEH1ZBBzTFFMYydEswTahzRRDWwFzkzsXKpC0IYV6+Qo4eoKTkfXpNxayfpA8gziJJzHTNVJgkPfyyuTOXCYgs7JNzw2cz/pq2eQE7bxJxJ3CsQ0JTo477D0MZzyEYJ1KoB6Y6CSQe/UXnyisV3CtIsO7lFP+7yBEoj9uN97BJ4i7BXuOqb2VIBGyd5zbYc4JZfYcp4tVxzWm3L5nAnYahqWETpdiSleTf7fZEofV+4VsQQTNLHMF8aIPCmBrH6EvUwyHRbNBD7B8kTn4XfUZV7Y4W+VtDLLhM0w/8GxbD0HrX3KdTZfnD9W23hQ95/EVUrNk6cV2KhLeYeXMXlZIJ3+LThhaydP7vo2xP4sY3FnzQ==
      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIA4VDXNq8/flgK/OlF7tshFzW+GuYLBrixKg6F2c6EPp
    # Change this to true if you require password auth instead of authorized keys
    allow-pw: true

  # If you don't supply a user-data: section, you need to fill out the identity
  # section above.
  # This is where the majority of your automation settings will exist.
  # Complete user-data reference: https://docs.cloud-init.io/en/latest/reference/examples.html
  # https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html#user-data
  user-data:
     users:
       - name: user1
         gecos: 'user1'
         plain_text_passwd: 'packer'
         groups: adm, cdrom, dip, lxd, plugdev, sudo
         sudo: ALL=(ALL) NOPASSWD:ALL
         shell: /bin/bash
         lock_passwd: False